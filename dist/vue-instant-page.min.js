var{assign:a}=Object,b=document.createElement('link'),c=b.relList?.supports&&b.relList.supports('prefetch'),d=navigator.connection?.saveData;export default {lastTouchTimestamp:void 0,mouseoverTimer:void 0,urlToPreload:void 0,finalOptions:{delayOnHover:65,useMousedown:!1,useMousedownOnly:!1,allowQueryString:!1,allowExternalLinks:!1,useWhitelist:!1},install(A,_){if(!c||d)return;this.finalOptions=a(this.finalOptions,_);this.buildPrefetcher();this.initializeEventListeners()},buildPrefetcher(){b.rel='prefetch';document.head.appendChild(b)},initializeEventListeners(){var A={capture:!0,passive:!0};!this.finalOptions.useMousedownOnly&&document.addEventListener('touchstart',this.touchstartListener.bind(this),A);!this.finalOptions.useMousedown?document.addEventListener('mouseover',this.mouseoverListener.bind(this),A):document.addEventListener('mousedown',this.mousedownListener.bind(this),A)},touchstartListener(A){this.lastTouchTimestamp=performance.now();var _=A.target.closest('a');if(!this.isPreloadable(_))return;_.addEventListener('touchcancel',this.touchendAndTouchcancelListener.bind(this),{passive:!0});_.addEventListener('touchend',this.touchendAndTouchcancelListener.bind(this),{passive:!0});this.urlToPreload=_.href;this.preload(_.href)},touchendAndTouchcancelListener(){this.urlToPreload=void 0;this.stopPreloading()},mouseoverListener(A){if(performance.now()-this.lastTouchTimestamp<1100)return;var _=A.target.closest('a');if(!this.isPreloadable(_))return;_.addEventListener('mouseout',this.mouseoutListener.bind(this),{passive:!0});this.urlToPreload=_.href;this.mouseoverTimer=setTimeout(()=>{this.preload(_.href);this.mouseoverTimer=void 0},this.finalOptions.delayOnHover)},mousedownListener(A){var _=A.target.closest('a');if(!this.isPreloadable(_))return;_.addEventListener('mouseout',this.mouseoutListener.bind(this),{passive:!0});this.urlToPreload=_.href;this.preload(_.href)},mouseoutListener(A){if(A.relatedTarget&&A.target.closest('a')==A.relatedTarget.closest('a'))return;this.mouseoverTimer&&(clearTimeout(this.mouseoverTimer),this.mouseoverTimer=void 0);this.urlToPreload=void 0;this.stopPreloading()},isPreloadable(A){if(!A||!A.href)return!1;if(this.urlToPreload==A.href)return!1;if(this.useWhitelist&&!('instant' in A.dataset))return!1;if(!this.allowExternalLinks&&A.origin!==location.origin&&!('instant' in A.dataset))return!1;if(!['http:','https:'].includes(A.protocol))return!1;if(A.protocol=='http:'&&location.protocol=='https:')return!1;if(!this.allowQueryString&&A.search&&!('instant' in A.dataset))return!1;if(A.hash&&A.pathname+A.search==location.pathname+location.search)return!1;if('noInstant' in A.dataset)return!1;return!0},preload(A){b.href=A},stopPreloading(){b.removeAttribute('href')}};
